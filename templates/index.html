<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nova+Mono&family=Orbitron:wght@400..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="icon"
      type="image/png"
      href="{{ url_for('static', filename='assets/logo.png') }}"
    />

    <title>ByteFeed News</title>
  </head>

  <body>
    <header class="site-header">
      <div class="brand-row">
        <img
          src="{{ url_for('static', filename='assets/logo.png') }}"
          alt="ByteFeed logo"
          class="brand-logo"
        />
        <div class="brand-text">
          <h1>ByteFeed</h1>
          <p class="site-tagline">Short tech news for CS students</p>
        </div>
      </div>
    </header>

    <main
      id="news-container"
      class="news_container"
      data-initial-limit="{{ initial_limit if initial_limit is defined else 10 }}"
      data-next-offset="{{ articles|length if articles is defined else 0 }}"
      data-has-more="{{ 'true' if articles|length >= (initial_limit or 10) else 'false' }}"
    >
      <ul id="articles-list">
        {% for article in articles %}
        <li class="article-item">
          <h2>{{ article.title }}</h2>
          <div class="article-row">
            <div class="article-text">
              <p class="summary-text">
                <span class="summary-short">{{ article.first_sentence }}</span>
                <span class="summary-full" style="display: none"
                  >{{ article.summary }}</span
                >
                {% if article.summary != article.first_sentence %}
                <a href="#" class="read-more-link">Read more</a>
                {% endif %}
              </p>
              <a
                class="read-full-article"
                href="{{ article.url }}"
                target="_blank"
                rel="noopener noreferrer"
                >Read full article</a
              >
              <p class="article-date">Published on: {{ article.created_at }}</p>
              <p class="article-category">Category: {{ article.category }}</p>
            </div>
            <div class="article-media">
              {% if article.image_url %}
              <img
                src="{{ article.image_url }}"
                alt="{{ article.image_alt or article.title }}"
                class="article-image"
              />
              {% endif %}
            </div>
          </div>
        </li>
        {% endfor %}
      </ul>
      <div
        id="loading-indicator"
        class="loading-indicator"
        style="display: none"
      >
        Loading more articlesâ€¦
      </div>
      <div id="scroll-sentinel" aria-hidden="true"></div>
      {% if articles|length == 0 %}
      <p id="empty-state">No articles found.</p>
      {% endif %}
    </main>

    <footer>
      <p>&copy; 2025 by Nora Stoklast</p>
    </footer>

    <script src="{{ url_for('static', filename='app.js') }}" defer></script>
  </body>
</html>
